# Generated by Hossein Mohammadi on 2021-01-01


# ##    ##      ##      ####   ####   ##   ##    ░█████╗░██╗░░██╗██████╗░██╗░██████╗████████╗███╗░░░███╗░█████╗░░██████╗
# ##    ##     ####     ## ##  ## ##   ## ##     ██╔  ██╗██║░░██║██╔══██╗██║██╔════╝╚══██╔══╝████╗░████║██╔══██╗██╔════╝
# ########    ## # #    ####   ####     ###      ██║     ███████║██████╔╝██║╚█████╗░░░░██║░░░██╔████╔██║███████║╚█████╗░
# ##    ##   ##    ##   ##     ##        #       ██║  ██╗██╔══██║██╔══██╗██║░╚═══██╗░░░██║░░░██║╚██╔╝██║██╔══██║░╚═══██╗
# ##    ##  ##      ##  ##     ##        #       ╚█████╔╝██║░░██║██║░░██║██║██████╔╝░░░██║░░░██║░╚═╝░██║██║░░██║██████╔╝
from django.core.exceptions import ObjectDoesNotExist
from django.db import migrations


def _get_obj_content_type(apps, schema_editor, obj):
    ContentType = apps.get_model("contenttypes", "contenttype")
    SDI = apps.get_model("form", "studentdetailedinfo")
    sdib = obj.student_detailed_info
    try:
        sdi = SDI.objects.get(id=sdib.id)
        return ContentType.objects.get(app_label='form', model='studentdetailedinfo')
    except ObjectDoesNotExist:
        return ContentType.objects.get(app_label='form', model='studentdetailedinfobase')


def semester_year_forwards_func(apps, schema_editor):
    # We get the model from the versioned app registry;
    # if we directly import it, it'll be the wrong version
    FormSemesterYear = apps.get_model("form", "semesteryear")
    ApplyDataSemesterYear = apps.get_model("applydata", "semesteryear")
    for obj in FormSemesterYear.objects.all():
        ApplyDataSemesterYear.objects.create(
            year=obj.year,
            semester=obj.semester,
        )


def semester_year_reverse_func(apps, schema_editor):
    # We get the model from the versioned app registry;
    # if we directly import it, it'll be the wrong version
    ApplyDataSemesterYear = apps.get_model("applydata", "semesteryear")
    ApplyDataSemesterYear.objects.all().delete()


def grade_forwards_func(apps, schema_editor):
    # We get the model from the versioned app registry;
    # if we directly import it, it'll be the wrong version
    FormGrade = apps.get_model("form", "grade")
    ApplyDataGrade = apps.get_model("applydata", "grade")
    for obj in FormGrade.objects.all():
        ApplyDataGrade.objects.create(
            name=obj.name,
        )


def grade_reverse_func(apps, schema_editor):
    # We get the model from the versioned app registry;
    # if we directly import it, it'll be the wrong version
    ApplyDataGrade = apps.get_model("applydata", "grade")
    ApplyDataGrade.objects.all().delete()


def publication_forwards_func(apps, schema_editor):
    # We get the model from the versioned app registry;
    # if we directly import it, it'll be the wrong version
    FormPublication = apps.get_model("form", "publication")
    ApplyDataPublication = apps.get_model("applydata", "publication")
    for obj in FormPublication.objects.all():
        ApplyDataPublication.objects.create(
            content_type=_get_obj_content_type(apps, schema_editor, obj),
            object_id=obj.student_detailed_info.id,
            title=obj.title,
            publish_year=obj.publish_year,
            which_author=obj.which_author,
            type=obj.type,
            journal_reputation=obj.journal_reputation,
            value=obj.value,
        )


def education_forwards_func(apps, schema_editor):
    # We get the model from the versioned app registry;
    # if we directly import it, it'll be the wrong version
    FormUniversityThrough = apps.get_model("form", "universitythrough")
    ApplyDataEducation = apps.get_model("applydata", "education")
    for obj in FormUniversityThrough.objects.all():
        ApplyDataEducation.objects.create(
            content_type=_get_obj_content_type(apps, schema_editor, obj),
            object_id=obj.student_detailed_info.id,
            university=obj.university,
            grade=obj.grade,
            major=obj.major,
            graduate_in=obj.graduate_in,
            thesis_title=obj.thesis_title,
            gpa=obj.gpa,
            value=obj.value,
        )


def regular_lc_forwards_func(apps, schema_editor):
    # We get the model from the versioned app registry;
    # if we directly import it, it'll be the wrong version
    FormRegularLanguageCertificate = apps.get_model("form", "regularlanguagecertificate")
    ApplyDataRegularLanguageCertificate = apps.get_model("applydata", "regularlanguagecertificate")
    for obj in FormRegularLanguageCertificate.objects.all():
        ApplyDataRegularLanguageCertificate.objects.create(
            content_type=_get_obj_content_type(apps, schema_editor, obj),
            object_id=obj.student_detailed_info.id,
            certificate_type=obj.certificate_type,
            is_mock=obj.is_mock,
            speaking=obj.speaking,
            listening=obj.listening,
            writing=obj.writing,
            reading=obj.reading,
            overall=obj.overall,
        )


def gmat_lc_forwards_func(apps, schema_editor):
    # We get the model from the versioned app registry;
    # if we directly import it, it'll be the wrong version
    FormGMATCertificate = apps.get_model("form", "gmatcertificate")
    ApplyDataGMATCertificate = apps.get_model("applydata", "gmatcertificate")
    for obj in FormGMATCertificate.objects.all():
        ApplyDataGMATCertificate.objects.create(
            content_type=_get_obj_content_type(apps, schema_editor, obj),
            object_id=obj.student_detailed_info.id,
            certificate_type=obj.certificate_type,
            is_mock=obj.is_mock,
            analytical_writing_assessment=obj.analytical_writing_assessment,
            integrated_reasoning=obj.integrated_reasoning,
            quantitative_and_verbal=obj.quantitative_and_verbal,
            total=obj.total,
        )


def gre_general_lc_forwards_func(apps, schema_editor):
    # We get the model from the versioned app registry;
    # if we directly import it, it'll be the wrong version
    FormGREGeneralCertificate = apps.get_model("form", "gregeneralcertificate")
    ApplyDataGREGeneralCertificate = apps.get_model("applydata", "gregeneralcertificate")
    for obj in FormGREGeneralCertificate.objects.all():
        ApplyDataGREGeneralCertificate.objects.create(
            content_type=_get_obj_content_type(apps, schema_editor, obj),
            object_id=obj.student_detailed_info.id,
            certificate_type=obj.certificate_type,
            is_mock=obj.is_mock,
            quantitative=obj.quantitative,
            verbal=obj.verbal,
            analytical_writing=obj.analytical_writing,
        )


def gre_subject_lc_forwards_func(apps, schema_editor):
    # We get the model from the versioned app registry;
    # if we directly import it, it'll be the wrong version
    FormGRESubjectCertificate = apps.get_model("form", "gresubjectcertificate")
    ApplyDataGRESubjectCertificate = apps.get_model("applydata", "gresubjectcertificate")
    for obj in FormGRESubjectCertificate.objects.filter(certificate_type__in=['GRE Chemistry', 'GRE Mathematics',
                                                                              'GRE Literature']):
        ApplyDataGRESubjectCertificate.objects.create(
            content_type=_get_obj_content_type(apps, schema_editor, obj),
            object_id=obj.student_detailed_info.id,
            certificate_type=obj.certificate_type,
            is_mock=obj.is_mock,
            quantitative=obj.quantitative,
            verbal=obj.verbal,
            analytical_writing=obj.analytical_writing,
            total=obj.total,
        )


def gre_biology_lc_forwards_func(apps, schema_editor):
    # We get the model from the versioned app registry;
    # if we directly import it, it'll be the wrong version
    FormGREBiologyCertificate = apps.get_model("form", "grebiologycertificate")
    ApplyDataGREBiologyCertificate = apps.get_model("applydata", "grebiologycertificate")
    for obj in FormGREBiologyCertificate.objects.all():
        ApplyDataGREBiologyCertificate.objects.create(
            content_type=_get_obj_content_type(apps, schema_editor, obj),
            object_id=obj.student_detailed_info.id,
            certificate_type=obj.certificate_type,
            is_mock=obj.is_mock,
            quantitative=obj.quantitative,
            verbal=obj.verbal,
            analytical_writing=obj.analytical_writing,
            total=obj.total,
            cellular_and_molecular=obj.cellular_and_molecular,
            organismal=obj.organismal,
            ecology_and_evolution=obj.ecology_and_evolution,
        )


def gre_physics_lc_forwards_func(apps, schema_editor):
    # We get the model from the versioned app registry;
    # if we directly import it, it'll be the wrong version
    FormGREPhysicsCertificate = apps.get_model("form", "grephysicscertificate")
    ApplyDataGREPhysicsCertificate = apps.get_model("applydata", "grephysicscertificate")
    for obj in FormGREPhysicsCertificate.objects.all():
        ApplyDataGREPhysicsCertificate.objects.create(
            content_type=_get_obj_content_type(apps, schema_editor, obj),
            object_id=obj.student_detailed_info.id,
            certificate_type=obj.certificate_type,
            is_mock=obj.is_mock,
            quantitative=obj.quantitative,
            verbal=obj.verbal,
            analytical_writing=obj.analytical_writing,
            total=obj.total,
            classical_mechanics=obj.classical_mechanics,
            electromagnetism=obj.electromagnetism,
            quantum_mechanics=obj.quantum_mechanics,
        )


def gre_psychology_lc_forwards_func(apps, schema_editor):
    # We get the model from the versioned app registry;
    # if we directly import it, it'll be the wrong version
    FormGREPsychologyCertificate = apps.get_model("form", "grepsychologycertificate")
    ApplyDataGREPsychologyCertificate = apps.get_model("applydata", "grepsychologycertificate")
    for obj in FormGREPsychologyCertificate.objects.all():
        ApplyDataGREPsychologyCertificate.objects.create(
            content_type=_get_obj_content_type(apps, schema_editor, obj),
            object_id=obj.student_detailed_info.id,
            certificate_type=obj.certificate_type,
            is_mock=obj.is_mock,
            quantitative=obj.quantitative,
            verbal=obj.verbal,
            analytical_writing=obj.analytical_writing,
            total=obj.total,
            biological=obj.biological,
            cognitive=obj.cognitive,
            social=obj.social,
            developmental=obj.developmental,
            clinical=obj.clinical,
            measurement_or_methodology=obj.measurement_or_methodology,
        )


def duolingo_lc_forwards_func(apps, schema_editor):
    # We get the model from the versioned app registry;
    # if we directly import it, it'll be the wrong version
    FormDuolingoCertificate = apps.get_model("form", "duolingocertificate")
    ApplyDataDuolingoCertificate = apps.get_model("applydata", "duolingocertificate")
    for obj in FormDuolingoCertificate.objects.all():
        ApplyDataDuolingoCertificate.objects.create(
            content_type=_get_obj_content_type(apps, schema_editor, obj),
            object_id=obj.student_detailed_info.id,
            certificate_type=obj.certificate_type,
            is_mock=obj.is_mock,
            overall=obj.overall,
            literacy=obj.literacy,
            comprehension=obj.comprehension,
            conversation=obj.conversation,
            production=obj.production,
        )


def forwards_func(apps, schema_editor):
    # We get the model from the versioned app registry;
    # if we directly import it, it'll be the wrong version
    Form = apps.get_model("form", "")
    ApplyData = apps.get_model("applydata", "")
    for obj in Form.objects.all():
        ApplyData.objects.create(
            content_type=_get_obj_content_type(apps, schema_editor, obj),
            object_id=obj.student_detailed_info.id,
            certificate_type=obj.certificate_type,
            is_mock=obj.is_mock,
        )


def fake_reverse(apps, schema_editor):
    pass


class Migration(migrations.Migration):
    dependencies = [
        ('form', '0017_auto_20201222_1050'),
        ('applydata',
         '0002_duolingocertificate_gmatcertificate_grebiologycertificate_gregeneralcertificate_grephysicscertificat'),
        ('similarApply', '0006_auto_20210107_2304')
    ]

    operations = [
        migrations.RunPython(
            code=semester_year_forwards_func, reverse_code=fake_reverse,
        ),
        migrations.RunPython(
            code=grade_forwards_func, reverse_code=fake_reverse,
        ),
        migrations.RunPython(
            code=publication_forwards_func, reverse_code=fake_reverse,
        ),
        migrations.RunPython(
            code=education_forwards_func, reverse_code=fake_reverse,
        ),
        migrations.RunPython(
            code=regular_lc_forwards_func, reverse_code=fake_reverse,
        ),
        migrations.RunPython(
            code=gmat_lc_forwards_func, reverse_code=fake_reverse,
        ),
        migrations.RunPython(
            code=gre_general_lc_forwards_func, reverse_code=fake_reverse,
        ),
        migrations.RunPython(
            code=gre_subject_lc_forwards_func, reverse_code=fake_reverse,
        ),
        migrations.RunPython(
            code=gre_biology_lc_forwards_func, reverse_code=fake_reverse,
        ),
        migrations.RunPython(
            code=gre_physics_lc_forwards_func, reverse_code=fake_reverse,
        ),
        migrations.RunPython(
            code=gre_psychology_lc_forwards_func, reverse_code=fake_reverse,
        ),
        migrations.RunPython(
            code=duolingo_lc_forwards_func, reverse_code=fake_reverse,
        ),
    ]
